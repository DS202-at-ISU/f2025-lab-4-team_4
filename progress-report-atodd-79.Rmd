---
title: "progress-report-atodd-79"
author: "Alexander M. Todd"
date: "2025-11-19"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##Progress Report

```{r}
library(rvest)
library(tidyverse)
library(Lahman)

head(HallOfFame, 3)
```

Required information in Hall Of Fame dataset:
- playerID
- yearID
- votedBy
- ballots (Total Number Cast)
- needed (Total Number to be Inducted)
- votes (Total Number of Votes received)
- inducted (Y, N)
- category
- needed_note


Now to begin Webscraping from baseball-reference.com:

```{r}

html <- read_html("https://www.baseball-reference.com/awards/hof_2025.shtml")

#open up the html file on r

hof_table <- html_elements(html, '#hof_BBWAA')

#select the table from selector_gadget

hof_table_2025 <- html_table(hof_table)

#read the table

hof_2025 <- data.frame(hof_table_2025)

#make the table a data frame

columns <- hof_2025[1, ]

colnames(hof_2025) <- columns

#rename column names to first row

hof_2025 <- hof_2025[-1, ]

#remove first row

hof_2025 <- hof_2025 |>
  select(
    Name, Votes
  )

#select important columns

head(hof_2025, 3)

```
From baseball-reference.com : 394 Total Ballots, 296 votes required for induction

Now to transform the data:

```{r}

colnames(People)

players <- People |>
  mutate(
    Player = paste(nameFirst, nameLast)
  ) |>
  select(Player, playerID)

hof_2025 <- hof_2025 |>
  mutate(
    Player = gsub("X-", "", Name), 
    yearID = 2025,
    votedBy = 'BBWAA',
    ballots = 394,
    needed = 296,
    votes = as.numeric(Votes),
    inducted = ifelse(votes >= needed, 'Y', 'N'),
    category = NA,
    needed_note = NA
  ) |>
  select(Player, yearID, votedBy, ballots, needed, votes, inducted, category, needed_note)
hof_2025

#replace player names with accent marks to fit Lahman People dataset

hof_2025[4, 'Player'] <- "Carlos Beltran"
hof_2025[10, 'Player'] <- "Felix Hernandez"
hof_2025[16, 'Player'] <- "Francisco Rodriguez"
hof_2025[25, 'Player'] <- "Carlos Gonzalez"
hof_2025[28, 'Player'] <- "Hanley Ramirez"

hof_2025 <- hof_2025 |>
  left_join(players, by = 'Player')
  
hof_2025 <- hof_2025 |>
  select(
    playerID, yearID, votedBy, ballots, needed, votes, inducted, category, needed_note
  )


HallOfFameUpdated <- rbind(HallOfFame, hof_2025)

head(HallOfFameUpdated, 10)

#nrow(HallOfFameUpdated) == nrow(HallOfFame) + nrow(hof_2025)
 
```

Now to write the CSV:

```{r}

write_csv(HallOfFameUpdated, file="HallOfFameUpdated.csv")

```
